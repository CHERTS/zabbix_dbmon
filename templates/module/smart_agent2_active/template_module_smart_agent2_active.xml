<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
   <version>5.0</version>
   <date>2022-03-29T19:44:39Z</date>
   <groups>
      <group>
         <name>Templates/Modules</name>
      </group>
   </groups>
   <templates>
      <template>
         <template>Template Module SMART by Zabbix agent 2 active</template>
         <name>Template Module SMART by Zabbix agent 2 active</name>
         <description>The template for monitoring S.M.A.R.T. attributes of physical disk that works without any external scripts. It collects metrics by Zabbix agent 2 version 5.0 and later with Smartmontools version 7.1 and later. Disk discovery LLD rule finds all HDD, SSD, NVMe disks with S.M.A.R.T. enabled. Attribute discovery LLD rule have pre-defined Vendor Specific Attributes for each disk, and will be discovered if attribute is present.&#13;
&#13;
You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/415662-discussion-thread-for-official-zabbix-smart-disk-monitoring&#13;
&#13;
Template tooling version used: 0.39</description>
         <groups>
            <group>
               <name>Templates/Modules</name>
            </group>
         </groups>
         <applications>
            <application>
               <name>Zabbix raw items</name>
            </application>
         </applications>
         <discovery_rules>
            <discovery_rule>
               <name>Disk discovery</name>
               <type>ZABBIX_ACTIVE</type>
               <key>smart.disk.discovery</key>
               <delay>1h</delay>
               <filter>
                  <evaltype>AND</evaltype>
                  <conditions>
                     <condition>
                        <macro>{#NAME}</macro>
                        <value>{$SMART.DISK.NAME.MATCHES}</value>
                        <formulaid>A</formulaid>
                     </condition>
                     <condition>
                        <macro>{#NAME}</macro>
                        <value>{$SMART.DISK.NAME.NOT_MATCHES}</value>
                        <operator>NOT_MATCHES_REGEX</operator>
                        <formulaid>B</formulaid>
                     </condition>
                  </conditions>
               </filter>
               <description>Discovery SMART disks.</description>
               <item_prototypes>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Bad_Block_Rate</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.bad_block_rate[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>Percentage of used reserve blocks divided by total reserve blocks.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.bad_block_rate.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Power_Cycle_Count</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.power_cycle_count[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>This attribute indicates the count of full hard disk power on/off cycles.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.power_cycle_count.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Program_Fail_Count_Chip</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.program_fail_count_chip[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>The total number of flash program operation failures since the drive was deployed.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.program_fail_count_chip.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Raw_Read_Error_Rate</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.raw_read_error_rate[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>Stores data related to the rate of hardware read errors that occurred when reading data from a disk surface. The raw value has different structure for different vendors and is often not meaningful as a decimal number. For some drives, this number may increase during normal operation without necessarily signifying errors.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.raw_read_error_rate.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Reallocated_Sector_Ct</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.reallocated_sector_ct[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>Disk discovered attribute.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.reallocated_sector_ct.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Reported_Uncorrect</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.reported_uncorrect[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>The count of errors that could not be recovered using hardware ECC.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.reported_uncorrect.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Seek_Error_Rate</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.seek_error_rate[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>Rate of seek errors of the magnetic heads. If there is a partial failure in the mechanical positioning system, then seek errors will arise. Such a failure may be due to numerous factors, such as damage to a servo, or thermal widening of the hard disk. The raw value has different structure for different vendors and is often not meaningful as a decimal number. For some drives, this number may increase during normal operation without necessarily signifying errors.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.seek_error_rate.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Spin_Up_Time</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.spin_up_time[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>Average time of spindle spin up (from zero RPM to fully operational [milliseconds]).</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.spin_up_time.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Start_Stop_Count</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.attribute.start_stop_count[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <discover>NO_DISCOVER</discover>
                     <description>A tally of spindle start/stop cycles. The spindle turns on, and hence the count is increased, both when the hard disk is turned on after having before been turned entirely off (disconnected from power source) and when the hard disk returns from having previously been put to sleep mode.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.start_stop_count.value</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Critical warning</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.critical_warning[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <description>This field indicates critical warnings for the state of the controller.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.critical_warning</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Smartctl error</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.error[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <trends>0</trends>
                     <value_type>TEXT</value_type>
                     <description>This metric will contain smartctl errors.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.error</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>1h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Exit status</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.es[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <description>The exit statuses of smartctl are defined by a bitmask but in decimal value. The eight different bits in the exit status have the following  meanings  for  ATA disks; some of these values may also be returned for SCSI disks.&#13;
Bit 0: Command line did not parse.&#13;
Bit 1: Device  open failed, device did not return an IDENTIFY DEVICE structure, or device is in a low-power mode (see '-n' option above).&#13;
Bit 2: Some SMART or other ATA command to the disk failed, or there was a checksum error in a SMART data  structure  (see '-b' option above).&#13;
Bit 3: SMART status check returned "DISK FAILING".&#13;
Bit 4: We found prefail Attributes &lt;= threshold.&#13;
Bit 5: SMART  status  check returned "DISK OK" but we found that some (usage or prefail) Attributes have been &lt;= threshold at some time in the past.&#13;
Bit 6: The device error log contains records of errors.&#13;
Bit 7: The device self-test log contains records of errors. [ATA only] Failed self-tests outdated by a newer successful extended self-test are ignored.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.exit_status</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Get disk attributes</name>
                     <type>ZABBIX_ACTIVE</type>
                     <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     <history>0</history>
                     <trends>0</trends>
                     <value_type>TEXT</value_type>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Power on hours</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.hours[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <description>Count of hours in power-on state. The raw value of this attribute shows total count of hours (or minutes, or seconds, depending on manufacturer) in power-on state. "By default, the total expected lifetime of a hard disk in perfect condition is defined as 5 years (running every day and night on all days). This is equal to 1825 days in 24/7 mode or 43800 hours." On some pre-2005 drives, this raw value may advance erratically and/or "wrap around" (reset to zero periodically). https://en.wikipedia.org/wiki/S.M.A.R.T.#Known_ATA_S.M.A.R.T._attributes</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.power_on_time</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Media errors</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.media_errors[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <description>Contains the number of occurrences where the controller detected an unrecovered data integrity error. Errors such as uncorrectable ECC, CRC checksum failure, or LBA tag mismatch are included in this field.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.media_errors</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Device model</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.model[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <trends>0</trends>
                     <value_type>CHAR</value_type>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.model_name</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Percentage used</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.percentage_used[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <units>%</units>
                     <description>Contains a vendor specific estimate of the percentage of NVM subsystem life used based on the actual usage and the manufacturer's prediction of NVM life. A value of 100 indicates that the estimated endurance of the NVM in the NVM subsystem has been consumed, but may not indicate an NVM subsystem failure. The value is allowed to exceed 100. Percentages greater than 254 shall be represented as 255. This value shall be updated once per power-on hour (when the controller is not in a sleep state).</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.percentage_used</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                     <trigger_prototypes>
                        <trigger_prototype>
                           <expression>{last()}&gt;90</expression>
                           <name>SMART [{#NAME}]: NVMe disk percentage using is over 90% of estimated endurance</name>
                           <priority>AVERAGE</priority>
                        </trigger_prototype>
                     </trigger_prototypes>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Serial number</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.sn[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <trends>0</trends>
                     <value_type>CHAR</value_type>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.serial_number</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                     <trigger_prototypes>
                        <trigger_prototype>
                           <expression>{diff()}=1 and {strlen()}&gt;0</expression>
                           <name>SMART [{#NAME}]: Disk has been replaced (new serial number received)</name>
                           <priority>INFO</priority>
                           <description>Device serial number has changed. Ack to close.</description>
                           <manual_close>YES</manual_close>
                        </trigger_prototype>
                     </trigger_prototypes>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Temperature</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.temperature[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <units>°C</units>
                     <description>Current drive temperature.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.temperature</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                     <trigger_prototypes>
                        <trigger_prototype>
                           <expression>{avg(5m)}&gt;{$SMART.TEMPERATURE.MAX.CRIT}</expression>
                           <name>SMART [{#NAME}]: Average disk temperature is critical (over {$SMART.TEMPERATURE.MAX.CRIT}°C for 5m)</name>
                           <priority>AVERAGE</priority>
                        </trigger_prototype>
                        <trigger_prototype>
                           <expression>{avg(5m)}&gt;{$SMART.TEMPERATURE.MAX.WARN}</expression>
                           <name>SMART [{#NAME}]: Average disk temperature is too high (over {$SMART.TEMPERATURE.MAX.WARN}°C for 5m)</name>
                           <priority>WARNING</priority>
                           <dependencies>
                              <dependency>
                                 <name>SMART [{#NAME}]: Average disk temperature is critical (over {$SMART.TEMPERATURE.MAX.CRIT}°C for 5m)</name>
                                 <expression>{Template Module SMART by Zabbix agent 2 active:smart.disk.temperature[{#NAME}].avg(5m)}&gt;{$SMART.TEMPERATURE.MAX.CRIT}</expression>
                              </dependency>
                           </dependencies>
                        </trigger_prototype>
                     </trigger_prototypes>
                  </item_prototype>
                  <item_prototype>
                     <name>SMART [{#NAME}]: Self-test passed</name>
                     <type>DEPENDENT</type>
                     <key>smart.disk.test[{#NAME}]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <trends>0</trends>
                     <value_type>CHAR</value_type>
                     <description>The disk is passed the SMART self-test or not.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>{#DISKTYPE} {#NAME}</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.self_test_passed</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>6h</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>smart.disk.get[{#PATH},"{#RAIDTYPE}"]</key>
                     </master_item>
                     <trigger_prototypes>
                        <trigger_prototype>
                           <expression>{last()}="false"</expression>
                           <name>SMART [{#NAME}]: Disk self-test is not passed</name>
                           <priority>HIGH</priority>
                        </trigger_prototype>
                     </trigger_prototypes>
                  </item_prototype>
               </item_prototypes>
               <overrides>
                  <override>
                     <name>Self-test</name>
                     <step>1</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#DISKTYPE}</macro>
                              <value>nvme</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>LIKE</operator>
                           <value>Self-test</value>
                           <status>ENABLED</status>
                           <discover>NO_DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Not NVMe</name>
                     <step>2</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#DISKTYPE}</macro>
                              <value>nvme</value>
                              <formulaid>A</formulaid>
                              <operator>NOT_MATCHES_REGEX</operator>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Media|Percentage|Critical</value>
                           <status>ENABLED</status>
                           <discover>NO_DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Raw_Read_Error_Rate</name>
                     <step>3</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Raw_Read_Error_Rate</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Raw_Read_Error_Rate</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Spin_Up_Time</name>
                     <step>4</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Spin_Up_Time</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Spin_Up_Time</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Start_Stop_Count</name>
                     <step>5</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Start_Stop_Count</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Start_Stop_Count</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Power_Cycle_Count</name>
                     <step>6</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Power_Cycle_Count</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Power_Cycle_Count</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Reported_Uncorrect</name>
                     <step>7</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Reported_Uncorrect</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Reported_Uncorrect</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Seek_Error_Rate</name>
                     <step>8</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Seek_Error_Rate</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Seek_Error_Rate</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Bad_Block_Rate</name>
                     <step>9</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Bad_Block_Rate</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Bad_Block_Rate</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Program_Fail_Count_Chip</name>
                     <step>10</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Program_Fail_Count_Chip</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Program_Fail_Count_Chip</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
                  <override>
                     <name>Reallocated_Sector_Ct</name>
                     <step>11</step>
                     <filter>
                        <conditions>
                           <condition>
                              <macro>{#ATTRIBUTES}</macro>
                              <value>Reallocated_Sector_Ct</value>
                              <formulaid>A</formulaid>
                           </condition>
                        </conditions>
                     </filter>
                     <operations>
                        <operation>
                           <operationobject>ITEM_PROTOTYPE</operationobject>
                           <operator>REGEXP</operator>
                           <value>Reallocated_Sector_Ct</value>
                           <status>ENABLED</status>
                           <discover>DISCOVER</discover>
                        </operation>
                     </operations>
                  </override>
               </overrides>
            </discovery_rule>
         </discovery_rules>
         <macros>
            <macro>
               <macro>{$SMART.DISK.NAME.MATCHES}</macro>
               <value>^.*$</value>
               <description>This macro is used in the filter of attribute and disk discoveries. It can be overridden on the host or linked on the template level.</description>
            </macro>
            <macro>
               <macro>{$SMART.DISK.NAME.NOT_MATCHES}</macro>
               <value>CHANGE_IF_NEEDED</value>
               <description>This macro is used in the filter of attribute and disk discoveries. It can be overridden on the host or linked on the template level.</description>
            </macro>
            <macro>
               <macro>{$SMART.TEMPERATURE.MAX.CRIT}</macro>
               <value>65</value>
               <description>This macro is used for trigger expression. It can be overridden on the host or linked on the template level.</description>
            </macro>
            <macro>
               <macro>{$SMART.TEMPERATURE.MAX.WARN}</macro>
               <value>50</value>
               <description>This macro is used for trigger expression. It can be overridden on the host or linked on the template level.</description>
            </macro>
         </macros>
      </template>
   </templates>
</zabbix_export>
